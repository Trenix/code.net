#:include gui\welcome.kv
#:include gui\playeramount.kv
#:include gui\revealdirections.kv
#:include gui\revpop.kv
#:include gui\logpop.kv
#:include gui\load.kv
#:include gui\colorselect.kv
#:import C kivy.utils.get_color_from_hex
#:import SlideTransition kivy.uix.screenmanager.SlideTransition

WindowManager:
    transition: SlideTransition()
    LoadingScreen:
    WelcomeWindow:
    PlayerWindow:
    ColorSelectScreen:
    PlayerReveal:
    MainWindow:

<MainWindow>
    name: "main"

    AnchorLayout:
        Image:
            size_hint: None, None
            size: 1644, 3840
            source: "images/defaultback.png"

    MDBoxLayout:
        orientation: "vertical"

        MDToolbar:
            title: "C0de.Net"
            left_action_items: [["menu", lambda x: x]]
            right_action_items: [["information-outline", lambda x: x]]

        MDBoxLayout:
            orientation: "vertical"
            padding: 10
            spacing: 21

            MDFloatLayout:
                MDLabel:
                    adaptive_size: True
#                    adaptive_height: True
                    id: playeridentifer
                    markup: True
                    pos_hint: {"right": 1, "top": 1}

            MDLabel:
                theme_text_color: "Custom"
                font_style: "H4"
                halign: "center"
                text_color: C("FFFFFF")
                text: "Round"
#                adaptive_height: True
                pos_hint: {"right": 1, "center_y": 0.5}

            MDSeparator:
                color: C("FFFFFF")
                adaptive_height: True

            MDLabel:
                text_color: app.theme_cls.primary_color
                theme_text_color: "Custom"
                id: currentround
                text: f"[size=30][font=Icons]{md_icons['circle-outline']}{md_icons['circle-outline']}{md_icons['circle-outline']}[/font][/size]"
                markup: True
                halign: "center"
                pos_hint: {"center_x": 0.5, "top": 1}

#            MDFillRoundFlatIconButton:
#                id: startround
#                text: "Start Round"
#                icon: 'monitor'
#                pos_hint: {"center_x": .5}
#                theme_text_color: "Custom"
#                font_style: 'Button'
#                on_release:
#                    root.nextround()

            MDBoxLayout:

            MDLabel:
                id: timer
                text_color: C('FFFFFF')
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                theme_text_color: "Custom"
                font_style: 'Button'
                halign: "center"
                text: "Round Timer"

            MDSeparator:
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                size_hint: 0.3, None
                color: C("FFFFFF")
                adaptive_height: True

            MDFloatingLabel:
                text: "[font=H4][size=30]00:00[/size][/font]"
                theme_text_color: "Custom"
                halign: "center"
                markup: True
                text_color: C('#FFFFFF')
                pos_hint: {"center_x": 0.5, "center_y": 0.5}

            MDFillRoundFlatIconButton:
                icon: 'close-circle-outline'
                text: "End Timer"
                adaptive_size: True
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                theme_text_color: "Custom"
                font_style: 'Button'
#                disabled: True

        MDBoxLayout:
            orientation: "vertical"

            MDTabs:
                indicator_color: C('FFFFFF')
                text_color_active: C('FFFFFF')
                text_color_normal: C('FFFFFF')
                id: mainpanel
                tab_hint_x: True
                tab_indicator_anim: True

                Tab:
                    title: f"[font=Button]ROUND 1[/font]"
                    markup: True

                    MDBoxLayout:
                        id: round1show
                        orientation: "vertical"
                        padding: 10
                        spacing: 10

                        MDBoxLayout:

                        MDBoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.3
                                Line:
                                    width: 0.3
                                    rectangle: self.x, self.y, self.width, self.height
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.06
                                Rectangle:
                                    pos: self.pos
                                    size: self.size

                            MDLabel:
                                id: round1sub
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                markup: True
                                text: f"[size=30][font=Icons]{md_icons['folder']}[/font] [font=Icons]{md_icons['folder']}[/font] [font=Icons]{md_icons['folder']}[/font] [font=Icons]{md_icons['folder']}[/font][/size]"

                            MDLabel:
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                markup: True
                                text: "At least one hacker is among the following."
                                id: round1sum

                        MDFillRoundFlatIconButton:
                            id: round1reveal
                            text: "Reveal Log"
                            icon: 'cloud-upload'
                            font_style: "Button"
                            md_bg_color: app.theme_cls.primary_color
                            pos_hint: {"center_x": .5, "center_y": .5}
                            disabled: True
                            on_press:
                                root.r1l1()

                        MDBoxLayout:

                Tab:
                    title: f"[font=Button]ROUND 2[/font]"
                    markup: True

                    MDBoxLayout:
                        id: round2show
                        opacity: 1
                        orientation: "vertical"
                        padding: 10
                        spacing: 10

                        MDBoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.3
                                Line:
                                    width: 0.3
                                    rectangle: self.x, self.y, self.width, self.height
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.06
                                Rectangle:
                                    pos: self.pos
                                    size: self.size

                            MDLabel:
                                id: round2sub1
                                markup: True
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                text: f"[size=30][font=Icons]{md_icons['folder']}[/font] [font=Icons]{md_icons['folder']}[/font] [font=Icons]{md_icons['folder']}[/font][/size]"

                            MDLabel:
                                id: round2sum1
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                markup: True
                                text: "At least one hacker is among the following."

                        MDFillRoundFlatIconButton:
                            id: round2reveal1
                            text: "Reveal Log"
                            icon: 'cloud-upload'
                            font_style: "Button"
                            md_bg_color: app.theme_cls.primary_color
                            pos_hint: {"center_x": .5, "center_y": .5}
                            disabled: True
                            on_press:
                                root.r2l1()

                        MDBoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.3
                                Line:
                                    width: 0.3
                                    rectangle: self.x, self.y, self.width, self.height
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.06
                                Rectangle:
                                    pos: self.pos
                                    size: self.size

                            MDLabel:
                                id: round2sub2
                                markup: True
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                text: f"[size=30][font=Icons]{md_icons['folder']}[/font] [font=Icons]{md_icons['folder']}[/font] [font=Icons]{md_icons['folder']}[/font][/size]"

                            MDLabel:
                                id: round2sum2
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                markup: True
                                text: "At least one hacker is among the following."

                        MDFillRoundFlatIconButton:
                            id: round2reveal2
                            text: "Reveal Log"
                            icon: 'cloud-upload'
                            font_style: "Button"
                            md_bg_color: app.theme_cls.primary_color
                            pos_hint: {"center_x": .5, "center_y": .5}
                            disabled: True
                            on_press:
                                root.r2l2()

                Tab:
                    title: f"[font=Button]ROUND 3[/font]"
                    markup: True

                    MDBoxLayout:
                        id: round3show
                        opacity: 1
                        orientation: "vertical"
                        padding: 10
                        spacing: 10

                        MDBoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.3
                                Line:
                                    width: 0.3
                                    rectangle: self.x, self.y, self.width, self.height
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.06
                                Rectangle:
                                    pos: self.pos
                                    size: self.size

                            MDLabel:
                                id: round3sum1
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                markup: True
                                text: f"[size=30][font=Icons]{md_icons['folder-key']}[/font] [font=Icons]{md_icons['folder-key']}[/font][/size]"

                            MDLabel:
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                text: "The log is encrypted to specified player."


                        MDFillRoundFlatIconButton:
                            id: round3reveal1
                            pos_hint: {"center_x":0.5, "center_y":0.5}
                            icon: 'cloud-upload'
                            font_style: "Button"
                            md_bg_color: app.theme_cls.primary_color
                            text: "Reveal Unknown's Log"
                            disabled: True
                            on_press:
                                root.r3l1()

                        MDBoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.3
                                Line:
                                    width: 0.3
                                    rectangle: self.x, self.y, self.width, self.height
                                Color:
                                    rgba: 51/255, 255/255, 51/255, 0.06
                                Rectangle:
                                    pos: self.pos
                                    size: self.size

                            MDLabel:
                                id: round3sum2
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                markup: True
                                text: f"[size=30][font=Icons]{md_icons['folder-key']}[/font] [font=Icons]{md_icons['folder-key']}[/font][/size]"

                            MDLabel:
                                text_color: app.theme_cls.primary_color
                                theme_text_color: "Custom"
                                font_style: 'Subtitle2'
                                halign: "center"
                                text: "The log is encrypted to specified player."

                        MDFillRoundFlatIconButton:
                            id: round3reveal2
                            icon: 'cloud-upload'
                            font_style: "Button"
                            md_bg_color: app.theme_cls.primary_color
                            pos_hint: {"center_x":0.5, "center_y":0.5}
                            text: "Reveal Unknown's Log"
                            disabled: True
                            on_press:
                                root.r3l2()

#        BoxLayout:
#            orientation: "vertical"
#
#            TabbedPanel:
#                id: mainpanel
#                do_default_tab: False
#                tab_width: (self.parent.width / 3)
#
#                TabbedPanelItem:
#                    id: tab1
#                    text: "Round 1"
#
#                    BoxLayout:
#                        id: round1show
#                        opacity: 0
#                        orientation: "vertical"
#                        padding: 10
#                        spacing: 10
#
#                        BoxLayout:
#
#                        BoxLayout:
#                            pos_hint: {"center_x":0.5, "y": 0}
#                            orientation: "vertical"
#                            canvas.before:
#                                Color:
#                                    rgba: C('#708090')
#                                Rectangle:
#                                    pos: self.pos
#                                    size: self.size
#                            Label:
#                                id: round1sub
#                                markup: True
#                                text: ""
#
#                            Label:
#                                id: round1sum
#                                text: ""
#
#                        BoxLayout:
#
#                            Button:
#                                id: round1reveal
#                                text: "Reveal Log"
#                                pos_hint: {"center_x":0.5, "center_y":0.5}
#                                disabled: True
#                                on_press:
#                                    root.r1l1()
#
#                        BoxLayout:
#
#                TabbedPanelItem:
#                    id: tab2
#                    text: "Round 2"
#
#                    BoxLayout:
#                        id: round2show
#                        opacity: 0
#                        orientation: "vertical"
#                        padding: 10
#                        spacing: 10
#
#                        BoxLayout:
#                            pos_hint: {"center_x":0.5, "y": 0}
#                            orientation: "vertical"
#                            canvas.before:
#                                Color:
#                                    rgba: C('#708090')
#                                Rectangle:
#                                    pos: self.pos
#                                    size: self.size
#
#                            Label:
#                                id: round2sub1
#                                markup: True
#                                text: ""
#
#                            Label:
#                                id: round2sum1
#                                text: ""
#
#                        BoxLayout:
#                            Button:
#                                id: round2reveal1
#                                text: "Reveal Log"
#                                pos_hint: {"center_x":0.5, "center_y":0.5}
#                                disabled: True
#                                on_press:
#                                    root.r2l1()
#
#                        BoxLayout:
#                            pos_hint: {"center_x":0.5, "y": 0}
#                            orientation: "vertical"
#                            canvas.before:
#                                Color:
#                                    rgba: C('#708090')
#                                Rectangle:
#                                    pos: self.pos
#                                    size: self.size
#                            Label:
#                                id: round2sub2
#                                markup: True
#                                text: ""
#
#                            Label:
#                                id: round2sum2
#                                text: ""
#
#                        BoxLayout:
#                            Button:
#                                id: round2reveal2
#                                text: "Reveal Log"
#                                pos_hint: {"center_x":0.5, "center_y":0.5}
#                                disabled: True
#                                on_press:
#                                    root.r2l2()
#
#                TabbedPanelItem:
#                    id: tab3
#                    text: "Round 3"
#
#                    BoxLayout:
#                        id: round3show
#                        opacity: 0
#                        orientation: "vertical"
#                        padding: 10
#                        spacing: 10
#
#                        BoxLayout:
#                            pos_hint: {"center_x":0.5, "y": 0}
#                            orientation: "vertical"
#                            canvas.before:
#                                Color:
#                                    rgba: C('#708090')
#                                Rectangle:
#                                    pos: self.pos
#                                    size: self.size
#
#                            Label:
#                                id: round3sum1
#                                halign: "center"
#                                text: "The following is exclusively revealed\nto the specified player."
#
#                        BoxLayout:
#                            Button:
#                                id: round3reveal1
#                                text: ""
#                                pos_hint: {"center_x":0.5, "center_y":0.5}
#                                disabled: True
#                                on_press:
#                                    root.r3l1()
#
#                        BoxLayout:
#                            pos_hint: {"center_x":0.5, "y": 0}
#                            orientation: "vertical"
#                            canvas.before:
#                                Color:
#                                    rgba: C('#708090')
#                                Rectangle:
#                                    pos: self.pos
#                                    size: self.size
#
#                            Label:
#                                id: round3sum2
#                                halign: "center"
#                                text: "The following is exclusively revealed\nto the specified player."
#
#                        BoxLayout:
#                            Button:
#                                id: round3reveal2
#                                text: ""
#                                pos_hint: {"center_x":0.5, "center_y":0.5}
#                                disabled: True
#                                on_press:
#                                    root.r3l2()

        MDBottomAppBar:
            MDToolbar:
                icon: "play"
                type: "bottom"
                on_action_button: app.on_pause()