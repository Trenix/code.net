<ActionDialog>:
    auto_dismiss: False
    size_hint: 0.9, 0.8

    MDCard:
        id: actioncard
        orientation: "vertical"
        spacing: "12dp"
        padding: "8dp"
        md_bg_color: app.theme_cls.primary_color
        border_radius: "20dp"
        radius: ["15dp"]

        MDLabel:
            id: whatplayer
            font_style: "H5"
            adaptive_height: True
            halign: "center"
            theme_text_color: "Custom"
            text_color: C("FFFFFF")

        MDSeparator:
            color: C("FFFFFF")

        MDStackLayout:
            padding: "8dp"
            spacing: "12dp"
            adaptive_height: True
            canvas.before:
                Color:
                    rgba: 0/255, 0/255, 0/255, 0.8
                Line:
                    width: dp(0.3)
                    rectangle: self.x, self.y, self.width, self.height
                Color:
                    rgba: 0/255, 0/255, 0/255, 0.4
                Rectangle:
                    pos: self.pos
                    size: self.size

            MDBoxLayout:
                orientation: "horizontal"
                adaptive_height: True

                MDLabel:
                    text: "[u]Action[/u]: "
                    text_color: C("FFFFFF")
                    font_style: "Subtitle2"
                    theme_text_color: "Custom"
                    markup: True
                    halign: 'left'
                    adaptive_width: True
                    text_size: None, None

                MDIcon:
                    text_color: C("FFFFFF")
                    theme_text_color: "Custom"
                    adaptive_width: True
                    id: whaticon
                    halign: 'left'

                MDLabel:
                    id: whataction
                    text: " "
                    halign: 'left'
                    text_color: C("FFFFFF")
                    font_style: "Subtitle2"
                    theme_text_color: "Custom"
                    markup: True

            MDLabel:
                id: whatpriority
                text: "[u]Priority[/u]: "
                text_color: C("FFFFFF")
                font_style: "Subtitle2"
                theme_text_color: "Custom"
                adaptive_height: True
                markup: True

            MDLabel:
                id: actiondesc
                text: "[u]Description[/u]: "
                text_color: C("FFFFFF")
                font_style: "Subtitle2"
                theme_text_color: "Custom"
                adaptive_height: True
                markup: True

        MDLabel:
            text: "Select"
            halign: "center"
            text_color: C("FFFFFF")
            font_style: "H6"
            theme_text_color: "Custom"
            adaptive_height: True

        MDSeparator:
            color: C("FFFFFF")

        RecycleView:
            bar_width: "8dp"
            bar_color: C('FFFFFF')
            size_hint_y: None
            height: dp(160)
            id: addbuttons
            viewclass: 'OneLineListItem'
            canvas.before:
                Color:
                    rgba: 0/255, 0/255, 0/255, 0.8
                Line:
                    width: dp(0.3)
                    rectangle: self.x, self.y, self.width, self.height
                Color:
                    rgba: 0/255, 0/255, 0/255, 0.4
                Rectangle:
                    pos: self.pos
                    size: self.size

            RecycleBoxLayout:
                padding: dp(8)
                default_size: None, dp(48)
                default_size_hint: 0.6, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'

        MDLabel:
            adaptive_height: True
            halign: "center"
            text: "Result"
            text_color: C("FFFFFF")
            font_style: "H6"
            theme_text_color: "Custom"

        MDSeparator:
            color: C("FFFFFF")

        MDLabel:
            id: actionresult
            text_color: C("FFFFFF")
            font_style: "Subtitle2"
            theme_text_color: "Custom"
            halign: "center"
            markup: True
            canvas.before:
                Color:
                    rgba: 0/255, 0/255, 0/255, 0.8
                Line:
                    width: dp(0.3)
                    rectangle: self.x, self.y, self.width, self.height
                Color:
                    rgba: 0/255, 0/255, 0/255, 0.4
                Rectangle:
                    pos: self.pos
                    size: self.size

        MDRectangleFlatButton:
            id: okaction
            font_style: "Button"
            theme_text_color: "Custom"
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            line_color: C("FFFFFF")
            text_color: C("FFFFFF")
            text: "End Turn"
            disabled: True
            line_width: '1.01dp'
            on_release:
                self.disabled = True
                app.root.get_screen('main').ids.mainscreenmanager.get_screen('actionscreen').actiontracker()
                root.dismiss()