#:include gui\welcome.kv
#:include gui\player.kv
#:include gui\reveal.kv
#:include gui\revpop.kv
#:import C kivy.utils.get_color_from_hex

WindowManager:
    WelcomeWindow:
    PlayerWindow:
    PlayerReveal:
    MainWindow:

<MainWindow>

#TODO: Needs timer
    name: "main"

    BoxLayout:
        orientation: "vertical"

        BoxLayout:
            orientation: "vertical"
            padding: 20
            spacing: 11
            Label:
                bold: True
                underline: True
                font_size: 70
                text: "Code.Net"
                size_hint: 0.2, 0.2
                pos_hint: {"center_x":0.5, "top":0.8}

            Label:
                font_size: 25
                id: currentround
                text: "[b]Current Round:[/b] 0"
                markup: True
                size_hint: 0.2, 0.2
                pos_hint: {"center_x":0.5, "top":0.8}


            Button:
                id: startround
                text: "Start Round"
                pos_hint: {"center_x":0.5, "top":.9}
                size_hint: 0.92, 0.25
                on_release:
                    root.nextround()

            Button:
                text: "Use Item"
                pos_hint: {"center_x":0.5, "top":.9}
                size_hint: 0.92, 0.25

        BoxLayout:
            orientation: "vertical"

            TabbedPanel:
                id: mainpanel
                do_default_tab: False
                tab_width: (self.parent.width / 3)

                TabbedPanelItem:
                    id: tab1
                    text: "Round 1"

                    BoxLayout:
                        id: round1show
                        opacity: 0
                        orientation: "vertical"
                        padding: 10
                        spacing: 10

                        BoxLayout:

                        BoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: C('#708090')
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            Label:
                                id: round1sub
                                markup: True
                                text: ""

                            Label:
                                id: round1sum
                                text: ""

                        BoxLayout:

                            Button:
                                id: round1reveal
                                text: "Reveal Log"
                                pos_hint: {"center_x":0.5, "center_y":0.5}
                                disabled: True
                                on_press:
                                    root.r1l1()

                        BoxLayout:

            #TODO: Add a question mark in the bottom right of every round for more information pop-up that explains the game.
            #TODO: Add an item that's a dud.

                TabbedPanelItem:
                    id: tab2
                    text: "Round 2"

                    BoxLayout:
                        id: round2show
                        opacity: 0
                        orientation: "vertical"
                        padding: 10
                        spacing: 10

                        BoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: C('#708090')
                                Rectangle:
                                    pos: self.pos
                                    size: self.size

                            Label:
                                id: round2sub1
                                markup: True
                                text: ""

                            Label:
                                id: round2sum1
                                text: ""

                        BoxLayout:
                            Button:
                                id: round2reveal1
                                text: "Reveal Log"
                                pos_hint: {"center_x":0.5, "center_y":0.5}
                                disabled: True
                                on_press:
                                    root.r2l1()

                        BoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: C('#708090')
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            Label:
                                id: round2sub2
                                markup: True
                                text: ""

                            Label:
                                id: round2sum2
                                text: ""

                        BoxLayout:
                            Button:
                                id: round2reveal2
                                text: "Reveal Log"
                                pos_hint: {"center_x":0.5, "center_y":0.5}
                                disabled: True
                                on_press:
                                    root.r2l2()

                TabbedPanelItem:
                    id: tab3
                    text: "Round 3"

                    BoxLayout:
                        id: round3show
                        opacity: 0
                        orientation: "vertical"
                        padding: 10
                        spacing: 10

                        BoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: C('#708090')
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            Label:
                                id: round3sub1
                                text: ""

                            Label:
                                id: round3sum1
                                text: ""

                        BoxLayout:
                            Button:
                                id: round3reveal1
                                text: "Player's Log"
                                pos_hint: {"center_x":0.5, "center_y":0.5}
                                disabled: True

                        BoxLayout:
                            pos_hint: {"center_x":0.5, "y": 0}
                            orientation: "vertical"
                            canvas.before:
                                Color:
                                    rgba: C('#708090')
                                Rectangle:
                                    pos: self.pos
                                    size: self.size
                            Label:
                                id: round3sub2
                                text: ""

                            Label:
                                id: round3sum2
                                text: ""

                        BoxLayout:
                            Button:
                                id: round3reveal2
                                text: "Player's Log"
                                pos_hint: {"center_x":0.5, "center_y":0.5}
                                disabled: True